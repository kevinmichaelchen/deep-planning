---
interface Paper {
  id: string;
  data: {
    title: string;
    year: number;
    arxiv: string;
    description: string;
    filename: string;
  };
}

interface Props {
  category: string;
  papers: Paper[];
  index: number;
}

const { category, papers, index } = Astro.props;
const base = import.meta.env.BASE_URL.replace(/\/?$/, "/");
---

<section class:list={["animate-reveal", `animate-reveal-${Math.min(index + 1, 9)}`, "mb-14"]}>
  <div class="flex items-center gap-4 mb-5">
    <h2 class="font-serif text-2xl font-semibold whitespace-nowrap">{category}</h2>
    <div class="flex-1 border-t border-border"></div>
    <span class="text-xs text-ink-faint font-medium tabular-nums bg-parchment-dark px-2.5 py-1 rounded-full whitespace-nowrap">
      {papers.length} {papers.length === 1 ? "paper" : "papers"}
    </span>
  </div>
  <div class="space-y-3">
    {papers.map((paper) => (
      <article class="group border border-border rounded-sm p-4 hover:border-crimson/30 hover:bg-surface transition-all">
        <div class="flex items-start gap-4">
          <div class="flex-1 min-w-0">
            <div class="flex items-center gap-3 mb-1.5">
              <a
                href={`${base}assets/papers/${paper.data.filename}`}
                class="font-serif text-base font-medium text-ink hover:text-crimson transition-colors leading-snug"
                target="_blank"
                rel="noopener noreferrer"
              >
                {paper.data.title}
              </a>
            </div>
            <p class="text-sm text-ink-muted leading-relaxed">
              {paper.data.description}
            </p>
          </div>
          <div class="flex items-center gap-3 shrink-0 pt-0.5">
            <span class="text-xs text-ink-faint font-medium tabular-nums">{paper.data.year}</span>
            <a
              href={`https://arxiv.org/abs/${paper.data.arxiv}`}
              class="text-xs text-ink-faint hover:text-crimson transition-colors font-medium"
              target="_blank"
              rel="noopener noreferrer"
            >
              arXiv
            </a>
            <a
              href={`${base}assets/papers/${paper.data.filename}`}
              class="inline-flex items-center gap-1 text-xs font-medium text-crimson hover:text-crimson-dark transition-colors"
              target="_blank"
              rel="noopener noreferrer"
            >
              <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
              PDF
            </a>
          </div>
        </div>
      </article>
    ))}
  </div>
</section>
